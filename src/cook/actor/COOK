scala_lib(
  name = "messages",
  srcs = [
    "messages.scala",
  ],
  deps = [
    "//src/cook/config:config",
    "//src/cook/config:config_ref",
    "//src/cook/ref:ref",
  ],
)

scala_lib(
  name = "actor_base",
  srcs = [
    "ActorBase.scala",
  ],
  deps = [
    "//lib/akka-actors.jar",
    "//lib/typesafe-config.jar",
  ],
)

scala_lib(
  name = "config_manager_actor",
  srcs = [
    "ConfigManagerActor.scala",
  ],
  deps = [
    ":actor_base",
    ":messages",
    "//src/cook/config:config",
  ],
)

scala_lib(
  name = "config_loader_actor",
  srcs = [
    "ConfigLoaderActor.scala",
  ],
  deps = [
    ":actor_base",
    ":messages",
    "util:token_based_worker",
    "//src/cook/config:config",
    "//src/cook/util:dag_solver",
  ],
)

scala_lib(
  name = "config_ref_manager_actor",
  srcs = [
    "ConfigRefManagerActor.scala",
  ],
  deps = [
    ":actor_base",
    ":messages",
    "//src/cook/config:config_ref",
  ],
)

scala_lib(
  name = "target_manager_actor",
  srcs = [
    "TargetManagerActor.scala",
  ],
  deps = [
    ":actor_base",
    ":messages",
    "//src/cook/config:config",
    "//src/cook/target:target",
  ],

)

scala_lib(
  name = "actor",
  srcs = [
    "Actors.scala",
  ],
  deps = [
    ":config_loader_actor",
    ":config_manager_actor",
    ":config_ref_manager_actor",
    ":target_manager_actor",
  ],
)
